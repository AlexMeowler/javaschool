<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

<f:view>
	<h:head>
		<title>Logiweb Statistics</title>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="css/menu.css" />
		<link rel="stylesheet" type="text/css" href="css/main.css" />
	</h:head>
	<h:body>
		<ui:include src="menu.xhtml" />
		<div class="container main-body">
			<h2>Welcome to Logiweb statistics table!</h2>
			<h3>Current driver statistics</h3>
			<p>
				<strong>#{driverStatsStorage.driversTotal}</strong> drivers in total.
				<br /> <strong>#{driverStatsStorage.driversAvailable}</strong>
				drivers available. <br /> <strong>#{driverStatsStorage.driversUnavailable}</strong>
				drivers unavailable. <br />
			</p>
			<h3>Current cars statistics</h3>
			<p>
				<strong>#{carStatsStorage.carsTotal}</strong> cars in total.
				<br /> <strong>#{carStatsStorage.carsAvailable}</strong>
				cars available. <br /> <strong>#{carStatsStorage.carsAssigned}</strong>
				cars assigned to orders. <br /> <strong>#{carStatsStorage.carsBroken}</strong> cars broken.
			</p>
			<h3>Orders table: 10 latest orders</h3>
			<table class="info-table">
				<caption style="display: none;">10 latest orders list</caption>
				<tr>
					<th scope="col">Order ID</th>
					<th scope="col">Status</th>
					<th scope="col">Assigned car</th>
					<th scope="col">Route</th>
					<th scope="col">Currently assigned drivers</th>
					<th scope="col">Assigned cargo</th>
				</tr>
				<ui:repeat value="#{ordersStorage.orders}" var="order">
					<tr>
						<td>#{order.id}</td>
						<td>#{order.isCompleted ? 'Completed' : 'Not completed'}</td>
						<td>#{order.car}</td>
						<td>#{order.route}</td>
						<td><ui:repeat value="#{order.driverList.drivers}" var="name">
							#{name}<br />
							</ui:repeat></td>
						<td><ui:repeat value="#{order.cargoList.cargo}" var="cargo">
						#{cargo.id}: #{cargo.name} (To deliver from <strong>#{cargo.from}</strong> to <strong>#{cargo.to}</strong>)<br />
							</ui:repeat></td>
					</tr>
				</ui:repeat>
			</table>
			<div class="footer"></div>
		</div>
	</h:body>
</f:view>

</html>